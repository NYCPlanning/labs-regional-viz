# Jobs
# ----------
slug: units-by-structure
category: Housing
categorySlug: housing
title: "Units by Structure"
menuTitle: "Units by Structure"
content: |
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
source: This maps show data from some source.

map:
  defaultGeographyLevel: subregion

  sources:
  - id: units-by-structure
    type: cartovector
    source-layers:
    - id: units-by-structure-municipality
      sql: SELECT the_geom_webmercator, category FROM region_units_by_structure_dotdensity_v0
    - id: empty-polygons-subregion
      sql: SELECT the_geom_webmercator, geoid, name FROM region_subregion_v0 WHERE geoid NOT IN('3605934000', '3605953000', '3605956000', '3610304000', '3610310000', '3610322194', '3610337000', '3610338000', '3610361984', '3610366839', '3610368000', '3610368473', '3610369463')
    - id: empty-polygons-county
      sql: SELECT the_geom_webmercator, geoid, name FROM region_county_v0 WHERE geoid NOT IN('3605934000', '3605953000', '3605956000', '3610304000', '3610310000', '3610322194', '3610337000', '3610338000', '3610361984', '3610366839', '3610368000', '3610368473', '3610369463')
    - id: empty-polygons-municipality
      sql: SELECT the_geom_webmercator, geoid, name FROM region_municipality_v0 WHERE geoid NOT IN('3605934000', '3605953000', '3605956000', '3610304000', '3610310000', '3610322194', '3610337000', '3610338000', '3610361984', '3610366839', '3610368000', '3610368473', '3610369463')

  popupColumns:
  - id: hous
    title: Units in 1-2
    large: true
    values: 
    - geomType: municipality
      columnName: housf16
      cv: housf16cv
      sig:
    - geomType: county
      columnName: hous16
      cv: hous16cv
      sig:
    - geomType: subregion
      columnName: hous16
      cv: hous16cv
      sig:
    - geomType: region
      columnName: hous16
      cv: hous16cv
      sig:
  - id: housmoe
    title: MOE
    values: 
    - geomType: municipality
      columnName: housf16moe
      cv: housf16cv
      sig:
    - geomType: county
      columnName: hous16moe
      cv: hous16cv
      sig:
    - geomType: subregion
      columnName: hous16moe
      cv: hous16cv
      sig:
    - geomType: region
      columnName: hous16moe
      cv: hous16cv
      sig:
  - id: houm
    title: Units in 3+
    large: true
    values: 
    - geomType: municipality
      columnName: houmf16
      cv: houmf16cv
      sig:
    - geomType: county
      columnName: houm16
      cv: houm16cv
      sig:
    - geomType: subregion
      columnName: houm16
      cv: houm16cv
      sig:
    - geomType: region
      columnName: houm16      
      cv: houm16cv
      sig:
  - id: hoummoe
    title: MOE
    values: 
    - geomType: municipality
      columnName: houmf16moe
      cv: houmf16cv
      sig:
    - geomType: county
      columnName: houm16moe
      cv: houm16cv
      sig:
    - geomType: subregion
      columnName: houm16moe
      cv: houm16cv
      sig:
    - geomType: region
      columnName: houm16moe      
      cv: houm16cv
      sig:

  isPercent: false

  layerGroups:
  - id: subregion
    title: "Units by Structure"
    legend:
      - label: Single-Family
        color: "#91bfdb"
      - label: Multi-Family
        color: "#fc8d59"
    layers:
    - id: units-by-structure-municipality
      type: circle
      source: units-by-structure
      source-layer: units-by-structure-municipality
      paint:
        circle-color:
        - match
        - - get
          - category
        - "HouM16"
        - "#91bfdb"
        - "HouS16"
        - "#fc8d59"
        - "#FFFFFF"
        circle-radius:
          stops:
          - - 7
            - 1.5
          - - 11
            - 2
        circle-opacity: 0.4
    - id: empty-subregion-polygons
      type: fill
      source: units-by-structure
      source-layer: empty-polygons-subregion
      paint:
        fill-opacity: 0
    - id: empty-subregion-line
      type: line
      source: units-by-structure
      source-layer: empty-polygons-subregion
      paint:
        line-color: rgba(131, 131, 131, 1)
        line-width: 0.5
  - id: county
    title: "Employment by Sector"
    legend:
      - label: Single-Family
        color: "#91bfdb"
      - label: Multi-Family
        color: "#fc8d59"
    layers:
    - id: units-by-structure-municipality
      type: circle
      source: units-by-structure
      source-layer: units-by-structure-municipality
      paint:
        circle-color:
        - match
        - - get
          - category
        - "HouM16"
        - "#91bfdb"
        - "HouS16"
        - "#fc8d59"
        - "#FFFFFF"
        circle-radius:
          stops:
          - - 7
            - 1.5
          - - 11
            - 2
        circle-opacity: 0.4
    - id: empty-county-polygons
      type: fill
      source: units-by-structure
      source-layer: empty-polygons-county
      paint:
        fill-opacity: 0
    - id: empty-county-line
      type: line
      source: units-by-structure
      source-layer: empty-polygons-county
      paint:
        line-color: rgba(131, 131, 131, 1)
        line-width: 0.5
  - id: municipality
    title: "Employment by Sector"
    legend:
      - label: Single-Family
        color: "#91bfdb"
      - label: Multi-Family
        color: "#fc8d59"
    layers:
    - id: units-by-structure-municipality
      type: circle
      source: units-by-structure
      source-layer: units-by-structure-municipality
      paint:
        circle-color:
        - match
        - - get
          - category
        - "HouM16"
        - "#91bfdb"
        - "HouS16"
        - "#fc8d59"
        - "#FFFFFF"
        circle-radius:
          stops:
          - - 7
            - 1.5
          - - 11
            - 2
        circle-opacity: 0.4
    - id: empty-municipality-polygons
      type: fill
      source: units-by-structure
      source-layer: empty-polygons-municipality
      paint:
        fill-opacity: 0
    - id: empty-municipality-line
      type: line
      source: units-by-structure
      source-layer: empty-polygons-municipality
      paint:
        line-color: rgba(131, 131, 131, 1)
        line-width: 0.5
