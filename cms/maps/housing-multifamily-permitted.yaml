# Housing
# ----------
slug: multifamily-permitted
category: Housing
categorySlug: housing
title: "NYC accounted for XX% of multifamily housing units permitted in the region since 2010."
menuTitle: "Housing Units Permitted by Building Size"
content: |
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
source: This maps show data from some source.

map:
  defaultGeographyLevel: county

  sources:
  - id: multifamily-permitted
    type: cartovector
    source-layers:
    - id: multifamily-permitted-subregion
      sql: SELECT the_geom_webmercator, geoid, houps1016 as value, name FROM region_subregion_v0
    - id: multifamily-permitted-county
      sql: SELECT the_geom_webmercator, geoid, houps1016 as value, name FROM region_county_v0
    - id: multifamily-permitted-municipality
      sql: SELECT the_geom_webmercator, random_value FROM region_unittype_dotdensity_v2
    - id: empty-polygons-subregion
      sql: SELECT the_geom_webmercator, geoid, name FROM region_subregion_v0 WHERE geoid NOT IN('3605934000', '3605953000', '3605956000', '3610304000', '3610310000', '3610322194', '3610337000', '3610338000', '3610361984', '3610366839', '3610368000', '3610368473', '3610369463')
    - id: empty-polygons-county
      sql: SELECT the_geom_webmercator, geoid, name FROM region_county_v0 WHERE geoid NOT IN('3605934000', '3605953000', '3605956000', '3610304000', '3610310000', '3610322194', '3610337000', '3610338000', '3610361984', '3610366839', '3610368000', '3610368473', '3610369463')
    - id: empty-polygons-municipality
      sql: SELECT the_geom_webmercator, geoid, name FROM region_municipality_v0 WHERE houptest <> 'N'

  popupColumns:
  - id: houps
    title: '1-2 Units'
    large: true
    values:
    - geomType: region
      columnName: houps1016
      cv:
      sig:
    - geomType: subregion
      columnName: houps1016
      cv:
      sig:
    - geomType: county
      columnName: houps1016
      cv:
      sig:
    - geomType: municipality
      columnName: houps1016
      cv:
      sig:
  - id: houpm1016
    title: '3+ Units'
    large: true
    values:
    - geomType: region
      columnName: houpm1016
      cv:
      sig:
    - geomType: subregion
      columnName: houpm1016
      cv:
      sig:
    - geomType: county
      columnName: houpm1016
      cv:
      sig:
    - geomType: municipality
      columnName: houpm1016
      cv:
      sig:

  isPermitMap: true

  isPercent: false

  layerGroups:
  - id: subregion
    title: "Single vs. Multifamily Housing Units Permitted, 2010-2016"
    legend:
    - color: "#fc8d59"
      label: "50 Single-family Units"
    - color: "#91bfdb"
      label: "50 Multi-family Units"
    layers:
    - id: multifamily-permitted-municipality
      type: circle
      legend:
      - color: "#fc8d59"
        label: "50 Single-family Units"
      - color: "#91bfdb"
        label: "50 Multi-family Units"
      source: multifamily-permitted
      source-layer: multifamily-permitted-municipality
      paint:
        circle-color:
        - match
        - - get
          - random_value
        - "single"
        - "#fc8d59"
        - "multi"
        - "#91bfdb"
        - "#FFFFFF"
        circle-radius:
          stops:
          - - 7
            - 1.5
          - - 11
            - 2
        circle-opacity: 0.9
    - id: empty-subregion-polygons
      type: fill
      source: multifamily-permitted
      source-layer: empty-polygons-subregion
      paint:
        fill-opacity: 0
    - id: empty-subregion-line
      type: line
      source: multifamily-permitted
      source-layer: empty-polygons-subregion
      paint:
        line-color: rgba(131, 131, 131, 1)
        line-width: 0.5

  - id: county
    title: "Single vs. Multifamily Housing Units Permitted, 2010-2016"
    legend:
    - color: "#fc8d59"
      label: "50 Single-family Units"
    - color: "#91bfdb"
      label: "50 Multi-family Units"
    layers:
    - id: multifamily-permitted-municipality
      type: circle
      legend:
      - color: "#fc8d59"
        label: "50 Single-family Units"
      - color: "#91bfdb"
        label: "50 Multi-family Units"
      source: multifamily-permitted
      source-layer: multifamily-permitted-municipality
      paint:
        circle-color:
        - match
        - - get
          - random_value
        - "single"
        - "#fc8d59"
        - "multi"
        - "#91bfdb"
        - "#FFFFFF"
        circle-radius:
          stops:
          - - 7
            - 1.5
          - - 11
            - 2
        circle-opacity: 0.9
    - id: empty-county-polygons
      type: fill
      source: multifamily-permitted
      source-layer: empty-polygons-county
      paint:
        fill-opacity: 0
    - id: empty-county-line
      type: line
      source: multifamily-permitted
      source-layer: empty-polygons-county
      paint:
        line-color: rgba(131, 131, 131, 1)
        line-width: 0.5

  - id: municipality
    title: "Single vs. Multifamily Housing Units Permitted, 2010-2016"
    legend:
    - color: "#fc8d59"
      label: "50 Single-family Units"
    - color: "#91bfdb"
      label: "50 Multi-family Units"
    layers:
    - id: multifamily-permitted-municipality
      type: circle
      legend:
      - color: "#fc8d59"
        label: "50 Single-family Units"
      - color: "#91bfdb"
        label: "50 Multi-family Units"
      source: multifamily-permitted
      source-layer: multifamily-permitted-municipality
      paint:
        circle-color:
        - match
        - - get
          - random_value
        - "single"
        - "#fc8d59"
        - "multi"
        - "#91bfdb"
        - "#FFFFFF"
        circle-radius:
          stops:
          - - 7
            - 1.5
          - - 11
            - 2
        circle-opacity: 0.9
    - id: empty-municipality-polygons
      type: fill
      source: multifamily-permitted
      source-layer: empty-polygons-municipality
      paint:
        fill-opacity: 0
    - id: empty-municipality-line
      type: line
      source: multifamily-permitted
      source-layer: empty-polygons-municipality
      paint:
        line-color: rgba(131, 131, 131, 1)
        line-width: 0.5
